function include(uri, callback) {
    var script = document.createElement("script");
    script.src = uri;
    script.onload = callback;
    document.head.appendChild(script);
}
include('static/js/vendor/jquery.js', function (){
    include('static/js/vendor/swiper.min.js', function (){
        var testimonialsSwiper = new Swiper('#testimonialsSwiper', {
            spaceBetween: 16,
            slidesPerView: 2,
            breakpoints: {
                767: {
                    slidesPerView: 1
                }
            },
            pagination: {
                el: '#testimonialsSwiper .swiper-pagination',
                clickable: true
            },
        });
        var storiesSwiper = new Swiper('#storiesSwiper', {
            spaceBetween: 16,
            slidesPerView: 3,
            breakpoints: {
                767: {
                    slidesPerView: 1
                },
                1024: {
                    slidesPerView: 2
                },

            },
            pagination: {
                el: '#storiesSwiper .swiper-pagination',
                clickable: true
            },
        });
        var seenSwiper = new Swiper('#seenSwiper', {
            spaceBetween: 16,
            slidesPerView: 6,
            breakpoints: {
                568: {
                    slidesPerView: 2
                },
                767: {
                    slidesPerView: 3
                },
                1024: {
                    slidesPerView: 4
                },
                1200: {
                    slidesPerView: 5
                },

            },
            pagination: {
                el: '#seenSwiper .swiper-pagination',
                clickable: true
            },
        });
        var pricingToursSwiper = new Swiper('#pricingToursSwiper', {
            spaceBetween: 32,
            slidesPerView: 4,
            breakpoints: {
                600: {
                    slidesPerView: 1,
                    spaceBetween: 22
                },

                900: {
                    slidesPerView: 2
                },

                1200: {
                    slidesPerView: 3,
                },
            },
            pagination: {
                el: '#pricingToursSwiper .swiper-pagination',
                clickable: true
            },
        });
    });
    include('static/js/vendor/jquery-ui.js', function (){
        /* range slider */
        (function () {
            var el = $('.ageSlider'),
                min = el.data("min") || 0,
                max = el.data("max") || 10;
            el.slider({
                max: max,
                min: min,
                range: true,
                values: [ min, max ],
                slide: function( event, ui ) {
                    $(".ui-fromAge").text(ui.values[ 0 ]);
                    $(".ui-toAge").text(ui.values[ 1 ]);
                },
                create: function ( event, ui ) {
                    $(".ui-fromAge").text(min);
                    $(".ui-toAge").text(max);
                }
            });
        })();

        $( "select.field" ).selectmenu();
        $( "#select-options" ).selectmenu({
            appendTo: $("#select-options").parent()
        });
        $( ".modalArrangeVideoDate .select-city" ).selectmenu({
            appendTo: $(".modalArrangeVideoDate .select-city").parent()
        });
        $( ".modalArrangeVideoDate .select-country" ).selectmenu({
            appendTo: $(".modalArrangeVideoDate .select-country").parent()
        });
        $( ".modalBookaCall .select-city" ).selectmenu({
            appendTo: $(".modalBookaCall .select-city").parent()
        });
        $( ".modalBookaCall .select-country" ).selectmenu({
            appendTo: $(".modalBookaCall .select-country").parent()
        });


        $( ".checkbox" ).checkboxradio();

        $( ".datepicker" ).datepicker({
            navigationAsDateFormat: true,
            // altField: ".dateData",
            showOn: "both",
            nextText: 'MM',
            prevText: 'MM'
        });

        $( ".accordion" ).accordion({
            heightStyle: 'content',
            collapsible: true,
            active: false
        });
    });

    $('.openMenu').click(function () {
        $(this).siblings('nav').show(300);
    });
    $('.closeMenu').click(function () {
       $(this).closest('nav').hide(300);
    });



    if($('.video')){
        function videoControll(){
            if($(this).hasClass("paused")){
                this.getElementsByTagName('video')[0].play();
                $(this).addClass("played").removeClass("paused");
            } else if($(this).hasClass("played")){
                this.getElementsByTagName('video')[0].pause();
                $(this).addClass("paused").removeClass("played");
            }
        }
        $('.video').click(videoControll);
    }

    if($('.modal')){
        var btnOpen = $('.modalOpen');
        btnOpen.click(function () {
            $('.modal').fadeOut();
            var modalData = $(this).data("modal");
            $('.' + modalData).fadeIn(300);
            return false;
        });

        $(document).mouseup(function (e){ // событие клика по веб-документу
            var div = $(".modal__box"); // тут указываем ID элемента
            if (!div.is(e.target) // если клик был не по нашему блоку
                && div.has(e.target).length === 0) { // и не по его дочерним элементам
                $(".modal").fadeOut(300);
                return false;
            }
        });
        $('.close').click(function () {
            $(".modal").fadeOut(300);
            return false;
        });
        $(document).keydown(function(e) {
            if( e.keyCode === 27 ) {
                $(".modal").fadeOut(300);
                return false;
            }
        });
    }

    if($('.percentLine')){
        $('.percentLine span').css("width", $('.percentLine').data("percent") + "%");
    }

    if($('.forMoreText')){
        var btnMore = document.createElement('button');
        $(btnMore).addClass('button button-more');
        $('.forMoreText').parent().append(btnMore);
        $(btnMore).click(function () {
            $(this).siblings('.forMoreText').toggleClass('fullHeight');
            $(this).toggleClass('fullHeight');
        });
    }
    
    if($('ul.pricingTours__features')){
        function pricingTours__features(speed) {
            var lists = $('ul.pricingTours__features'),
                showCount = $(this).data('count-item')? $(this).data('count-item') : 8;
            lists.each(function (i) {
                $(this).find('li').each(function (i) {
                    if(i >= showCount){
                        $(this).hide(speed);
                    }
                })
            });
        }
        $('.showAllList').click(function () {
            if($(this).hasClass('opend')){
                $('.showAllList').text("View all").removeClass('opend');
                pricingTours__features(100);
            } else{
                $('.showAllList').text("Hide all").addClass('opend');
                $('ul.pricingTours__features li').show(100);
            }
        });
        pricingTours__features();
    }

    function successMessage(text) {
        if($('.successMessage')){
            $('.successMessage').remove();
        }
        var successMessage = document.createElement('div');
        successMessage.classList.add('successMessage');
        document.body.appendChild(successMessage);
        $('.successMessage').text(text).fadeIn(500);
        setTimeout(function () {
            $('.successMessage').fadeOut(500);
            $('.successMessage').remove();
        }, 5000);
    }

    function setListener() {
        $('#sendLetter').click(function () {
            successMessage("Email successfully sent");
        });
        $('#sendGift').click(function () {
            successMessage("Gift successfully sent");
        });
        $('#addToFavorite').click(function () {
            successMessage("Your request has been accepted. We will contact you in advance for further details.");
        });
        $('#additionalOptionsSelectDay').change(function () {
            $_this = $(this);
           if($_this.prop('checked')){
               $_this.siblings('.dateTimePicker').show(100);
           } else{
               $_this.siblings('.dateTimePicker').hide(100);
           }
        });
        $('#additionalOptionsAddMessage').change(function () {
            $_this = $(this);
           if($_this.prop('checked')){
               $_this.siblings('.fieldTextarea').show(100);
           } else{
               $_this.siblings('.fieldTextarea').hide(100);
           }
        });
        $('.showAllList').click(function () {
           $(this).siblings('ul.pricingTours__features li').show(100);
        });
        $('.filterOpenBtn').click(function () {
           $('.filter__fieldGroup').toggleClass('mobHide');
        });

        $('.tariffs__item .viewAll').click(function (e) {
           $(e.target).siblings('.tariffs__features').toggle(200);
        });

    }
    setListener();

});